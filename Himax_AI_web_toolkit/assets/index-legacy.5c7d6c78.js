System.register(["./arco-legacy.e274f5da.js","./index-legacy.3b160781.js","./index-legacy.791c97452.js","./vue-legacy.77c02482.js","./index-legacy.bf732e88.js","./index-legacy.791c97453.js","./index-legacy.4373032b.js","./index-legacy.8f5c53d6.js"],(function(e,l){"use strict";var a,t,i,o,s,d,n,r,c,u,m,p,f,w,g,b,q,y,v,_,h,V,k,x,$,S,I,z,U,O,W,j,A,C,P,J,N,E,T,M=document.createElement("style");return M.textContent=".content[data-v-77458db4]{position:absolute;top:50%;left:50%;margin-top:-121px;margin-left:-95px;text-align:center}.arco-form-item-label-col{justify-content:flex-start}.arco-list-medium .arco-list-content-wrapper .arco-list-header{padding:6px 20px;background-color:var(--color-neutral-2)}.item-card[data-v-5da6805a]{width:50%;min-width:680px;height:90%;margin:16px}\n",document.head.appendChild(M),{setters:[e=>{a=e.d,t=e.C,i=e.D,o=e.aN,s=e.G,d=e.aO,n=e.aQ,r=e.br,c=e.aS,u=e.aH,m=e.r,p=e.b,f=e.w,w=e.y,g=e.aP,b=e.u,q=e.aK,y=e.E,v=e.aR,_=e.bx,h=e.by,V=e.bz,k=e.bh,x=e.bi,$=e.aJ,S=e.aI,I=e.bA,z=e.bt},e=>{U=e._,O=e.a,W=e.u,j=e.k,A=e.p,C=e.z,P=e.y,J=e.D},()=>{},e=>{N=e.g},()=>{},()=>{},()=>{},e=>{E=e.u,T=e.r}],execute:function(){const l={class:"content"},M={class:"operation-row"},D=U(a({__name:"index",setup(e){const a=N(),u=()=>{a.push({name:"setup"})};return(e,a)=>{const m=r,p=c;return t(),i("div",l,[o(m,{class:"result",subtitle:"comming soon"}),s("div",M,[o(p,{key:"back",type:"primary",onClick:u},{default:d((()=>[n(" back ")])),_:1})])])}}}),[["__scopeId","data-v-77458db4"]]),G=a({__name:"index",setup:e=>(e,l)=>(t(),u(D))}),L={key:0,style:{"margin-bottom":"16px"}},Q=U(a({__name:"Config",setup(e){const l=O(),{device:a}=E(),s=W(),{t:r}=j(),U=m({wifi:{enabled:!0,ssid:"",password:"",encryption:"0"},mqtt:{clientId:"",enabled:!1,host:"",port:1883,username:"",password:"",ssl:!1}});let P=m({wifi:{enabled:!0,ssid:"",password:"",encryption:"0"},mqtt:{enabled:!1,host:"",port:1883,username:"",password:"",ssl:!1}});const J=p(!1),N=p(!1),M=p(!0),D=async()=>{C("config",{type:"Config Wifi Or MQTT",behavior:"save"}),N.value=!0,P.wifi.ssid===U.wifi.ssid&&P.wifi.password===U.wifi.password&&P.wifi.encryption===U.wifi.encryption||await(a.value?.setWifi(U.wifi.ssid,U.wifi.password,parseInt(U.wifi.encryption,10))),U.mqtt.enabled?await(a.value?.setMqttServer(U.mqtt.clientId,U.mqtt.host,U.mqtt.port,U.mqtt.username,U.mqtt.password,U.mqtt.ssl?1:0)):await(a.value?.setMqttServer("","",0,"","",0)),await a.value.hardReset(),P=JSON.parse(JSON.stringify(U)),N.value=!1,M.value=!0,v.success(r("config.save.success"))},G=async e=>{if(e===A.SerialConnected&&!J.value)try{l.showLoading();const[e,t]=await Promise.all([T((()=>a.value?.getWifi()),5,500,null),T((()=>a.value?.getMqttServer()),5,500,null)]);U?.wifi&&(U.wifi.password=e.config.password,U.wifi.ssid=e.config.name,U.wifi.encryption=e.config.security.toString()),t?.config&&(""!==t.config.address?(U.mqtt.enabled=!0,U.mqtt.clientId=t.config.client_id,U.mqtt.host=t.config.address,U.mqtt.port=t.config.port,U.mqtt.username=t.config.username,U.mqtt.password=t.config.password,U.mqtt.ssl=t.config.use_ssl):U.mqtt.enabled=!1),P=JSON.parse(JSON.stringify(U)),J.value=!0,M.value=!0}finally{l.hideLoading()}};return f((()=>U),(e=>{JSON.stringify(U)!==JSON.stringify(P)?M.value=!1:M.value=!0}),{deep:!0}),f((()=>s.deviceStatus),(e=>{G(e)})),w((async()=>{G(s.deviceStatus)})),(e,l)=>{const a=_,r=h,m=V,p=k,f=x,w=$,v=S,O=c,W=I,j=z;return t(),u(j,{class:y(["general-card","item-card"]),title:e.$t("workplace.config.wifi")},{default:d((()=>[o(W,{model:U,style:{width:"80%"},onSubmit:D},{default:d((()=>[o(r,{field:"wifi.ssid",label:e.$t("workplace.config.wifi.ssid"),required:""},{default:d((()=>[o(a,{modelValue:U.wifi.ssid,"onUpdate:modelValue":l[0]||(l[0]=e=>U.wifi.ssid=e),placeholder:e.$t("workplace.config.wifi.message.ssid"),size:"large","allow-clear":""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),o(r,{field:"wifi.password",label:e.$t("workplace.config.wifi.password")},{default:d((()=>[o(m,{modelValue:U.wifi.password,"onUpdate:modelValue":l[1]||(l[1]=e=>U.wifi.password=e),placeholder:e.$t("workplace.config.wifi.message.password"),size:"large","allow-clear":""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),o(r,{field:"wifi.encryption",label:e.$t("workplace.config.wifi.encryption")},{default:d((()=>[o(f,{modelValue:U.wifi.encryption,"onUpdate:modelValue":l[2]||(l[2]=e=>U.wifi.encryption=e),size:"large"},{default:d((()=>[o(p,{value:"0"},{default:d((()=>[n("AUTO")])),_:1}),o(p,{value:"1"},{default:d((()=>[n("Open")])),_:1}),o(p,{value:"2"},{default:d((()=>[n("WEP")])),_:1}),o(p,{value:"3"},{default:d((()=>[n("WPA1_WPA2")])),_:1}),o(p,{value:"4"},{default:d((()=>[n("WPA2_WPA3")])),_:1}),o(p,{value:"5"},{default:d((()=>[n("WPA3")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),o(r,{label:e.$t("workplace.config.mqtt")},{default:d((()=>[o(w,{modelValue:U.mqtt.enabled,"onUpdate:modelValue":l[3]||(l[3]=e=>U.mqtt.enabled=e)},null,8,["modelValue"])])),_:1},8,["label"]),U.mqtt.enabled?(t(),i("div",L,[o(r,{field:"mqtt.host",label:e.$t("workplace.config.mqtt.host"),required:""},{default:d((()=>[o(a,{modelValue:U.mqtt.host,"onUpdate:modelValue":l[4]||(l[4]=e=>U.mqtt.host=e),placeholder:e.$t("workplace.config.mqtt.message.host"),size:"large","allow-clear":""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),o(r,{field:"mqtt.port",label:e.$t("workplace.config.mqtt.port"),required:""},{default:d((()=>[o(v,{modelValue:U.mqtt.port,"onUpdate:modelValue":l[5]||(l[5]=e=>U.mqtt.port=e),placeholder:e.$t("workplace.config.mqtt.message.port"),size:"large","allow-clear":""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),o(r,{field:"mqtt.clientId",label:e.$t("workplace.config.mqtt.clientId")},{default:d((()=>[o(a,{modelValue:U.mqtt.clientId,"onUpdate:modelValue":l[6]||(l[6]=e=>U.mqtt.clientId=e),placeholder:e.$t("workplace.config.mqtt.message.clientId"),size:"large","allow-clear":""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),o(r,{field:"mqtt.username",label:e.$t("workplace.config.mqtt.username")},{default:d((()=>[o(a,{modelValue:U.mqtt.username,"onUpdate:modelValue":l[7]||(l[7]=e=>U.mqtt.username=e),placeholder:e.$t("workplace.config.mqtt.message.username"),size:"large","allow-clear":""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),o(r,{field:"mqtt.password",label:e.$t("workplace.config.mqtt.password")},{default:d((()=>[o(m,{modelValue:U.mqtt.password,"onUpdate:modelValue":l[8]||(l[8]=e=>U.mqtt.password=e),placeholder:e.$t("workplace.config.mqtt.message.password"),size:"large","allow-clear":""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),o(r,{label:e.$t("workplace.config.mqtt.ssl")},{default:d((()=>[o(w,{modelValue:U.mqtt.ssl,"onUpdate:modelValue":l[9]||(l[9]=e=>U.mqtt.ssl=e)},null,8,["modelValue"])])),_:1},8,["label"])])):g("",!0),o(r,null,{default:d((()=>[o(O,{type:"primary","html-type":"submit",size:"large",loading:N.value,disabled:M.value||b(s).deviceStatus!==b(A).SerialConnected},{default:d((()=>[n(q(e.$t("workplace.config.wifi.save")),1)])),_:1},8,["loading","disabled"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title"])}}}),[["__scopeId","data-v-5da6805a"]]),R=a({__name:"index",setup:e=>(e,l)=>(t(),u(Q))});e("default",a({__name:"index",setup(e){const l=W();return(e,a)=>b(l).deviceType.id===b(P)[b(J).XiaoEsp32s3].id?(t(),u(G,{key:0})):b(l).deviceType.id===b(P)[b(J).GroveAIWE2].id?(t(),u(R,{key:1})):g("",!0)}}))}}}));
